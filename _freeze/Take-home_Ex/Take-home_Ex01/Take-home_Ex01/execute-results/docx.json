{
  "hash": "932a0c7eedf911e8ec33f7df56e28e9f",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Take-home Exercise 1: Demographic structures and distribution of Singapore in 2024\"\nformat:\n  docx:\n    prefer-html: true\nauthor: \"Belinda Lim\"\ndate: May 1, 2025\ndate-modified: \"last-modified\"\neditor: source\nexecute:\n  eval: true\n  echo: true\n  warning: false\n  freeze: true\n---\n\n\n\n# **1 Introduction**\n\n## **1.1 Overview**\n\nAccording to [World Health Organisation](https://www.who.int/data/gho/indicator-metadata-registry/imr-details/1119), an economically dependent population is defined as the sum of the population under 15 years of age plus the population 65 years of age and over, for a given country, territory, or geographic area, at a specific point in time.\n\nEconomically productive population is defined as the population between 15 and 64 years of age, for the same country, territory, or geographic area, at the same specific point in time.\n\nWith this definition, we aim to conduct an exploratory data analysis on the demographic structures and distribution of Singapore in 2024, focusing on the three groups of population, to understand their characteristics for better policy making.\n\n# **2 Data and Data Pre-processing**\n\n## **2.1 Data Source**\n\nThe data for Singapore Residents by Planning Area / Subzone, Single Year of Age and Sex, June 2024 are downloaded from [Department of Statistics, Singapore (DOS)](https://www.singstat.gov.sg/find-data/search-by-theme/population/geographic-distribution/latest-data). The dataset comprise 6 variables and 60,424 records.\n\n## **2.2 Loading data and libraries**\n\n::: callout-note\n### Note\n\nIt is assumed that you already have [**pacman**](https://cran.r-project.org/web/packages/pacman/index.html) package installed. If not, please go ahead install pacman first. The code chunk below uses p_load() of pacman package to check if packages listed below are installed in the computer. If they are, then they will be launched into R.\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npacman::p_load(tidyverse, patchwork, scales, sf, plotly)\n```\n:::\n\n\n\nWe import Demographic_data.csv into R environment by using [*read_csv()*](https://readr.tidyverse.org/reference/read_delim.html) function of [**readr**](https://readr.tidyverse.org/) package. **readr** is one of the tidyverse package.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npop_data <- read_csv(\"data/Demographic_data.csv\", show_col_types = FALSE)\n```\n:::\n\n\n\nThe attributes found in the pop_data are:\n\n-   Planning Areas (PA): There are 55 PAs in Singapore designated by URA, such as Ang Mo Kio, Bedok, etc.\n\n-   Subzones (SZ): PAs are further sub-divided into 332 SZs, such as Ang Mo Kio Town Centre, Cheng San etc. under Ang Mo Kio PA.\n\n-   Age: 0 to 89 and 90_and_Over\n\n-   Sex: Male and Female\n\n-   Pop: Number of Population\n\n-   Time: 2024\n\nUnder Age, there is also a category \"90_and_Over\". For data visualisation, the category is converted to the numeric number \"90\" instead. The following codes will convert and ensure that all figures under \"Age\" and \"Pop\" are numeric prior to further data analysis.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npop_data <- pop_data %>%\n  mutate(\n    Age = if_else(Age == \"90_and_Over\", \"90\", Age), \n    Age = as.numeric(Age),                           \n    Pop = as.numeric(Pop)                            \n  )\n```\n:::\n\n\n\n# **3 Exploratory Data Analysis and Insights**\n\n## **3.1 Singapore Population Age Pyramid and Life Expectancy**\n\n### 3.1.1 Data preparation and Visualisation\n\nFirst we will bin the ages into 5-year blocks for greater visibility by age groups in the age pyramid.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npop_data <- pop_data %>%\nmutate(AgeGroup = cut(Age, breaks = c(seq(0, 90, by = 5), Inf),\n                        labels = c(paste(seq(0,85,5), seq(4,89,5), sep=\"-\"), \"90+\"),\n                        right = FALSE))\n```\n:::\n\n\n\nThe population data is grouped by age group and sex and the data for male population is converted such that it is on the left.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nage_pyramid <- pop_data %>%\n  group_by(AgeGroup, Sex) %>%\n  summarise(Population = sum(Pop), .groups = 'drop') %>%\n  mutate(\n    Population = ifelse(Sex == \"Males\", -Population, Population), \n    Sex = factor(Sex, levels = c(\"Males\", \"Females\"))\n    )\n```\n:::\n\n\n\nThe code for the Age Pyramid plot is:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npyramid_plot <- ggplot(age_pyramid, aes(x = Population, y = AgeGroup, fill = Sex)) +\n  geom_bar(stat=\"identity\") +\n  scale_x_continuous(\n  labels = function(x) scales::comma(abs(x)),\n  breaks = scales::pretty_breaks()) +\n  labs(title=\"Age Pyramid (Population Number)\", x= NULL, y=\"Age Group\") +\n  scale_fill_manual(values = c(\"Males\" = \"lightblue\", \"Females\" = \"pink\")) +\n  theme_minimal() +\n  theme(legend.position=\"bottom\") +\n  theme(plot.title = element_text(hjust = 0.5,size = 10, face = \"bold\"))  \n```\n:::\n\n\n\nThe proportion of males and females are also compared for each age group. The code to compute the porportion is as follows:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nproportion_data <- pop_data %>%\n  group_by(AgeGroup, Sex) %>%\n  summarise(Population = sum(Pop, na.rm = TRUE), .groups = \"drop\") %>%\n  group_by(AgeGroup) %>%\n  mutate(\n    TotalInGroup = sum(Population),\n    Proportion = Population / TotalInGroup\n  )\n```\n:::\n\n\n\nThe code for the Proportion plot is:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nproportion_plot <- ggplot(proportion_data, aes(x = Proportion, y = AgeGroup, fill = Sex)) +\n  geom_bar(stat = \"identity\") +\n  geom_vline(xintercept = 0.5, color = \"red\", linetype = \"dotted\", linewidth = 1) + \n  labs(\n    title = \"Proportion of Males vs Females by Age Group\",\n    x = NULL,\n    y = NULL\n  ) +\n  scale_fill_manual(\n  values = c(\"Males\" = \"lightblue\", \"Females\" = \"pink\"),\n  guide = \"none\"  \n) +\n  theme_minimal() +\n  theme(\n    axis.text.x = element_text(hjust = 0.5),\n    plot.title = element_text(hjust = 0.5,size = 10, face = \"bold\"),\n    legend.position = \"none\"\n  )\n```\n:::\n\n\n\nThe 2 plots are combined using the code below.\n\n::: panel-tabset\n### The plot\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](Take-home_Ex01_files/figure-docx/unnamed-chunk-9-1.png){width=100%}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nproportion_plot <- proportion_plot +\n  theme(axis.text.y = element_blank(), axis.ticks.y = element_blank())\n\ncombined_plot <- wrap_plots(\n  list(pyramid_plot, proportion_plot),\n  ncol = 2,\n  widths = c(1, 1.5),\n  guides = \"collect\",\n  align = \"hv\",\n  axis = \"y\"\n) +\n  plot_annotation(\n    title = \"Age Pyramid and Proportion\",\n    theme = theme(\n      plot.title = element_text(hjust = 0.5, size = 14, face = \"bold\")\n    )\n  ) &\n  theme(\n    legend.position = \"bottom\",\n    legend.box = \"horizontal\",\n    legend.justification = \"center\",\n    legend.box.just = \"center\",\n    legend.text = element_text(size = 9),\n    legend.title = element_text(size = 9)\n  )\n\ncombined_plot\n```\n:::\n\n\n:::\n\n### 3.1.2 Insights\n\nSingapore's population age pyramid can be described as a [constrictive pyramid](https://populationeducation.org/what-are-different-types-population-pyramids/), which is typical for countries with higher socio-economic development. There are low birth and mortality rates, contributing to an ageing population. The largest population groups belong to ages 30-64. As population ages, the proportion of economically productive population will decline.\n\nThe population's proportion shows that there is gender balance in the younger population aged 30 and below. Notably, there is increasingly higher proportion of females than males from age 70 onwards. This suggests that females tend to have longer life expectancy than males.\n\nWith ageing population, it is important to focus on preventive healthcare measures for a healthier population. This enables better quality of life and delayed retirement age for older Singaporeans to contribute economically. As there are higher proportion of elderly females, more resources such as hospital beds or geriatric care can be catered for the females.\n\n## **3.2 Population demographics by Planning Areas**\n\nThere are 55 Planning Areas (PA) designated by [URA](https://data.gov.sg/collections/1817/view) where each planning area is served by a town centre and several neighbourhood commercial/shopping centres. Each area is supported by smaller subzones (SZ), which are usually centred on a focal point such as neighbourhood centre or activity node.\n\nUsing data visualisation, we can identify the top 10 PAs with the highest percentage of population aged 65 and above.\n\n### 3.2.1 Data preparation and Visualisation\n\nThe following codes are used to:\n\n-   Compute Total population per PA\n\n-   Compute Total Population aged 65 and above by PA\n\n-   Merge both data and compute percentage of Population aged 65 and above by PA\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npop_total <- pop_data %>%\n  group_by(PA) %>%\n  summarise(TotalPop = sum(Pop, na.rm = TRUE))\n\npop_65plus <- pop_data %>%\n  filter(Age >= 65) %>%\n  group_by(PA) %>%\n  summarise(Pop65Plus = sum(Pop, na.rm = TRUE))\n\npop_summary <- left_join(pop_total, pop_65plus, by = \"PA\") %>%\n  mutate(\n    Pop65Plus = replace_na(Pop65Plus, 0),\n    PctOver65 = Pop65Plus / TotalPop * 100,\n    PctOver65 = ifelse(is.nan(PctOver65), NA, round(PctOver65, 1))\n  )\n```\n:::\n\n\n\n::: panel-tabset\n### The plot\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](Take-home_Ex01_files/figure-docx/unnamed-chunk-12-1.png){width=100%}\n:::\n:::\n\n\n\n### The code\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nplot_data <- pop_summary %>%\n  arrange(desc(Pop65Plus)) %>%\n  slice_head(n = 20) %>%\n  mutate(\n    PA = factor(PA, levels = rev(PA)),  \n    LabelPop = format(Pop65Plus, big.mark = \",\"),\n    LabelPct = paste0(round(PctOver65, 1), \"%\")\n  )\n\nmedian_pop <- median(plot_data$Pop65Plus, na.rm = TRUE)\nmedian_pct <- median(plot_data$PctOver65, na.rm = TRUE)\n\npop_plot <- ggplot(plot_data, aes(x = Pop65Plus, y = PA)) +\n  geom_col(fill = \"#6DAF88\")+\n  geom_text(aes(label = LabelPop), hjust = -0.2, size = 2.8) +\n  geom_vline(xintercept = median_pop, color = \"red\", linetype = \"dashed\", linewidth = 0.8) +\nannotate(\"text\", x = median_pop, y = 21.2, label = paste(\"Median =\", scales::comma(median_pop)), color = \"red\", size = 3, vjust = 1) +\n  labs(title = \"Population Numbers Aged 65+ by PA\", x = NULL, y = NULL) +\n  theme_minimal() +\n  theme(\n    plot.title = element_text(size = 12, face = \"bold\"),\n    axis.text.y = element_text(size = 10),\n    plot.margin = margin(5, 30, 5, 5)  \n  ) +\n  scale_x_continuous(labels = scales::comma, expand = expansion(mult = c(0, 0.2)))\n\npct_plot <- ggplot(plot_data, aes(x = PctOver65, y = PA)) +\n  geom_col(fill = \"#b6e2d3\") +\n  geom_text(aes(label = LabelPct), hjust = -0.2, size = 2.8) +\n  geom_vline(xintercept = median_pct, color = \"red\", linetype = \"dashed\", linewidth = 0.8) +\n annotate(\"text\", x = median_pct, y = 21.2, label = paste0(\"Median = \", round(median_pct, 1), \"%\"), color = \"red\", size = 3, vjust = 1)+\n  labs(title = \"% of Population Aged 65+ by PA\", x = NULL, y = NULL) +\n  theme_minimal() +\n  theme(\n    plot.title = element_text(size = 12, face = \"bold\"),\n    axis.text.y = element_blank(),\n    axis.ticks.y = element_blank(),\n    plot.margin = margin(5, 5, 5, 5)  # optional\n  ) +\n  scale_x_continuous(labels = scales::label_percent(scale = 1), expand = expansion(mult = c(0, 0.2)))\n\nfinal_chart <- pop_plot + pct_plot +\n  plot_layout(ncol = 2, widths = c(1.1, 1)) +\n  plot_annotation(\n    title = \"Top 20 PAs with highest Elderly Population\",\n    theme = theme(\n      plot.title = element_text(hjust = 0.5, face = \"bold\", size = 16),\n      plot.subtitle = element_text(hjust = 0.5, size = 11)\n    )\n  )\n\nfinal_chart\n```\n:::\n\n\n:::\n\n### 3.2.2 Insights\n\nThere are 10 PAs with elderly population aged 65 and above exceeding Singapore's median. As the population size vary across PAs, it is important to compare the numbers and percentage of elderly population in each PA to understand the ageing profile. From both charts, we conclude that there are 4 PAs, namely Bedok, Ang Mo Kio, Bukit Merah and Toa Payoh that have both higher number and percentage of elderly population higher than the median. These are critical ageing towns that requires necessary infrastructure, healthcare and eldercare services to support mobility and active lifestyle.\n\nTowns like Tampines and Hougang also have high numbers of elderly population but with percentage of elderly population slightly below the median. These towns have more demographic mix, with younger populations residing. Given the high absolute number of elderly population, it is important to plan ahead and scale up infrastructure, healthcare and eldercare services too.\n\n## **3.3 Dependency Ratio**\n\nDependency ratio measures the average number of economically dependent population per 100 economically productive population, for a given country, territory, or geographic area, at a specific point in time.\n\n### 3.3.1 Data preparation and Visualisation\n\nGiven the definitions mentioned under the overview, we create and sum up the population numbers in the following groups\n\n-   Those Age_DR \\< 15 are \"Dependent_0_14\"\n\n-   Those Age_DR \\>= 65 are \"Dependent_65_plus\"\n\n-   Those Age_DR \\>= 15 & Age_DR \\<= 64 are \"Productive\"\n\nThe codes for the groupings and data preparation are:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npop_data <- read_csv(\"data/Demographic_data.csv\") %>%\n  mutate(\n    Age_DR = if_else(Age == \"90_and_Over\", \"90\", as.character(Age)),\n    Age_DR = as.numeric(Age_DR),\n    Pop_DR = as.numeric(Pop),\n    AgeGroup_DR = case_when(\n      Age_DR < 15 ~ \"Dependent_0_14\",\n      Age_DR >= 65 ~ \"Dependent_65_plus\",\n      Age_DR >= 15 & Age_DR <= 64 ~ \"Productive\",\n      TRUE ~ NA_character_\n    )\n  )\n\npop_summary_DR <- pop_data %>%\n  filter(!is.na(AgeGroup_DR)) %>%\n  group_by(PA, AgeGroup_DR) %>%\n  summarise(Pop_DR = sum(Pop_DR, na.rm = TRUE), .groups = \"drop\")\n\n# Prepare wide table for Dependency Ratio calculation\npop_wide_DR <- pop_summary_DR %>%\n  pivot_wider(\n    names_from = AgeGroup_DR,\n    values_from = Pop_DR,\n    values_fill = 0\n  ) %>%\n  mutate(\n    Dependent_DR = Dependent_0_14 + Dependent_65_plus,\n    Productive_DR = Productive,\n    DependencyRatio = round((Dependent_DR / Productive_DR) * 100, 1)\n  ) %>%\n  filter(Productive_DR > 0)\n```\n:::\n\n\n\nThe Dependency ratio for the PA is computed with the following code:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Calculate median and 75th percentile\nmedian_DR <- median(pop_wide_DR$DependencyRatio)\nq75_DR <- quantile(pop_wide_DR$DependencyRatio, 0.75)\n\n# Create 3-category fill group\npop_wide_DR <- pop_wide_DR %>%\n  mutate(\n    FillGroup = case_when(\n      DependencyRatio > q75_DR ~ \"Above 75th\",\n      DependencyRatio > median_DR ~ \"Between Median–75th\",\n      TRUE ~ \"Below Median\"\n    )\n  )\n```\n:::\n\n\n\n::: panel-tabset\n### The plot\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](Take-home_Ex01_files/figure-docx/unnamed-chunk-16-1.png){width=100%}\n:::\n:::\n\n\n\n### The code\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](Take-home_Ex01_files/figure-docx/unnamed-chunk-17-1.png)\n:::\n:::\n\n\n:::\n\n### 3.3.2 Insights\n\nThe dependency ratio reflects the number of economically-dependent population (i.e. children under 15 and elderly above 65) supported by economically-productive population. This is usually measured at the national level, but the breakdown by PAs reveals variations in the demographic distribution. There are 11 PAs with dependency ratio exceeding 75th percentile (52.1%). As these towns have more children and elderly, it is recommended to priortise more mixed use infrastructure, co-located elder/ childcare facilities and community services catered for both groups. From housing perspective, Housing & Development Board can consider building more multi-generational flats for families to stay in the same neighbourhood.\n\nThere are also 10 PAs with dependency ratio between 50th to 75th percentile (46.6% to 52.1%). These are subsequent PAs that will benefit from better mixed-use urban planning. As infrastructure and facilities take years to build, the Government can intervene early to futureproof these neighbourhood and support the ageing population.\n\n# **4 Conclusion and Future Study**\n\nThe exploratory data analysis summarises Singapore's demographic structure in 2024, focusing on the demograhic characteristics on age composition, life expectancy, elderly population distribution, and dependency ratio.\n\nFuture studies can consider having time-series analysis to analyse population changes and trends over time. It is also useful to supplement the dependency ratio analysis with household incomes of the population in the PAs to under the economical pressure that the economically-productive population are facing.\n\n# **5 References**\n\n-   Department of Statistics Singapore (2024). *Singapore Residents by Planning Area / Subzone, Single Year of Age and Sex, June 2024*. Retrieved from: <https://www.singstat.gov.sg>\n\n<!-- -->\n\n-   Population Education. *What are the Different Types of Population Pyramids?* Retrieved from: <https://populationeducation.org/what-are-different-types-population-pyramids/> \n\n<!-- -->\n\n-   Urban Redevelopment Authority (URA). *Master Plan 2014 – Planning Area Boundary*. Retrieved from: <https://www.ura.gov.sg>\n\n<!-- -->\n\n-   World Health Organization (2023). *Indicator Metadata Registry: Economically Dependent Population*. Retrieved from: <https://www.who.int/data/gho/indicator-metadata-registry/imr-details/1119>\n\n\n\n::: :::::\n:::\n\n# **6 Extra visualisation beyond the scope of Take-Home Exercise**\n\nThe Singapore's map shapefile is downloaded from [URA's Master Plan 2014 Planning Area Boundary](https://data.gov.sg/collections/1701/view).\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsg_map <- st_read(\"data/Map/MP14_PLNG_AREA_WEB_PL.shp\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nReading layer `MP14_PLNG_AREA_WEB_PL' from data source \n  `C:\\Users\\Belinda\\OneDrive - Singapore Management University\\Desktop\\Visual Analytics\\belindalim\\ISSS608-VAA\\Take-home_Ex\\Take-home_Ex01\\data\\Map\\MP14_PLNG_AREA_WEB_PL.shp' \n  using driver `ESRI Shapefile'\nSimple feature collection with 55 features and 12 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 2667.538 ymin: 15748.72 xmax: 56396.44 ymax: 50256.33\nProjected CRS: SVY21\n```\n\n\n:::\n:::\n\n\n\nThe percentage of Population aged 65 and above by PA is computed and joined to the map.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsg_map <- sg_map %>%\n  mutate(PA = toupper(trimws(PLN_AREA_N)))\n\npop_summary <- pop_summary %>%\n  mutate(PA = toupper(trimws(PA)))\n\nsg_map_joined <- sg_map %>%\n  left_join(pop_summary, by = \"PA\")\n```\n:::\n\n\n\nThe choropleth map with percentage of elderly population aged 65 and above is shown below:\n\n::: panel-tabset\n### The plot\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\np <- ggplot(sg_map_joined) +\n  geom_sf(aes(\n    fill = PctOver65,\n    text = paste0(\"Planning Area: \", PA, \"\\nAge 65+ Population: \", PctOver65, \"%\")\n  ), color = \"white\", linewidth = 0.3) +\n  scale_fill_gradient(\n    low = \"#ffe0b2\",   \n    high = \"#b30000\",  \n    na.value = \"grey90\") +\n  labs(\n    title = \"% of Population Aged 65+ by PA\",\n    fill = \"% Aged 65+\"\n  ) +\n  theme_void() + theme(panel.border = element_blank()) \n\nggplotly(p, tooltip = \"text\")\n```\n:::\n\n\n\n### The code\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\np <- ggplot(sg_map_joined) +\n  geom_sf(aes(\n    fill = PctOver65,\n    text = paste0(\"Planning Area: \", PA, \"\\nAge 65+ Population: \", PctOver65, \"%\")\n  ), color = \"white\", linewidth = 0.3) +\n  scale_fill_gradient(\n    low = \"#ffe0b2\",   \n    high = \"#b30000\",  \n    na.value = \"grey90\") +\n  labs(\n    title = \"Residents Aged 65+ by Planning Area (2024)\",\n    fill = \"% Aged 65+\"\n  ) +\n  theme_void() + theme(panel.border = element_blank()) \n\nggplotly(p, tooltip = \"text\")\n```\n:::\n\n\n:::\n",
    "supporting": [
      "Take-home_Ex01_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": null,
    "postProcess": false
  }
}